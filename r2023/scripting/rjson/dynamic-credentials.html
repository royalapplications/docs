<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Dynamic Credentials </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Dynamic Credentials ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper" class="ra-scripting">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="https://www.royalapps.com/?return_to_last_selected_page">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="dynamic-credentials">Dynamic Credentials</h1>

<p>Dynamic Credentials can be useful in cases where it's unfeasible (or just not possible) to retrieve the full dataset of an external credential management system in one go. Instead, you can retrieve just the metadata (Name, ID, etc.) of your credentials and populate the other fields (Username, Password, etc.) on demand, when a connection referencing the credentials is established.</p>
<div class="NOTE">
<h5>Note</h5>
<p><strong>Advantages</strong>:</p>
<ul>
<li>Fast retrieval of credential objects with the bare minimum of information that can be assigned to connections just like regular credential objects.</li>
<li>Confidential information can be kept on the remote system until required.</li>
<li>Can be useful in scenarios where the administrator needs to provide users access to a set of credentials but the end users should not be able to &quot;see&quot; the actual usernames or passwords of those credentials.</li>
</ul>
</div>
<div class="WARNING">
<h5>Warning</h5>
<p><strong>Things to consider</strong>:</p>
<ul>
<li>Properties that aren't pre-populated (Username, Password, etc.) are only available when establishing a connection that references the credential.</li>
<li>Two distinct calls are required to retrieve the full data set.</li>
<li>If the dynamic credentials are stored on a remote database, a network connection to that database must be available when establishing connections that reference dynamic credentials.</li>
</ul>
</div>
<p>Dynamic Credentials share the same properties as regular credential objects. That means, the process of creating dynamic credentials is exactly the same as for regular credentials. The difference is that the following properties can (but don't have to) be left empty and fetched on demand by the dedicated &quot;Dynamic Credential Script&quot; of your dynamic folder:</p>
<ul>
<li><a href="available-properties/royaljsondynamiccredential.html#username"><code>Username</code></a></li>
<li><a href="available-properties/royaljsondynamiccredential.html#password"><code>Password</code></a></li>
<li><a href="available-properties/royaljsondynamiccredential.html#keyfilepath"><code>KeyFilePath</code></a></li>
<li><a href="available-properties/royaljsondynamiccredential.html#keyfilecontent"><code>KeyFileContent</code></a></li>
<li><a href="available-properties/royaljsondynamiccredential.html#keyfilepassphrase"><code>KeyFilePassphrase</code></a></li>
</ul>
<p>Here's an example of how to create a dynamic credential object and assign it to an SSH connection:</p>
<pre><code class="lang-json">{
	&quot;Objects&quot;: [
		{
			&quot;Type&quot;: &quot;DynamicCredential&quot;,
			&quot;Name&quot;: &quot;User 1&quot;,
			&quot;ID&quot;: &quot;Cred01&quot;
		},
		{
			&quot;Type&quot;: &quot;TerminalConnection&quot;,
			&quot;ComputerName&quot;: &quot;localhost&quot;,
			&quot;Name&quot;: &quot;Localhost&quot;,
			&quot;CredentialID&quot;: &quot;Cred01&quot;
		}
	]
}
</code></pre>
<p>Like previously mentioned, creating dynamic credentials works exactly the same as regular credentials. You can however leave the username, password, etc. properties empty and fill them on demand with the dedicated &quot;Dynamic Credential Script&quot;.</p>
<p>This second script is expected to return a single <a href="available-properties/royaljsondynamiccredential.html">RoyalJSONDynamicCredential</a> object like in the following example:</p>
<pre><code class="lang-json">{
	&quot;Username&quot;: &quot;user&quot;,
	&quot;Password&quot;: &quot;pass&quot;
}
</code></pre>
<p>So let's see what happens here:</p>
<ul>
<li>From line 3 to 7 we define a dynamic credential object named &quot;User 1&quot;. We set its ID to &quot;Cred01&quot;. We don't specify username or password values.</li>
<li>From line 8 to 13 we create a new SSH connection and reference the dynamic credential by its ID.</li>
<li>In the separate dynamic credential script we return a RoyalJSONDynamicCredential object which provides the values for <code>Username</code> and <code>Password</code>.</li>
<li>Just before the SSH connection is established, the dedicated dynamic credential script is executed and its return value is used to populate the missing information, namely the username and password of the credential.</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>Obviously this is not a real-world example as the dynamic credential script just returns the same credential data for any requested dynamic credential. To actually differentiate between multiple credentials in your scripts and return the corresponding data, please refer to the documentation about <a href="tokens.html">tokens</a>. Specifically, there are <a href="tokens.html">special tokens</a> which are only valid in the context of a dynamic credential script.</p>
</div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="form p-e2">
                <div class="form-group">
                  <label for="version-select">Version</label>
                  <select id="version-select" class="form-control">
                    <option value="r2023">Royal TS V7 / Royal Server V5
                    <option value="r2021">Royal TS V6 / Royal Server V4
                  </select>
                </div>
              </div>    
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/royalapplications/docs/blob/main/src/r2023/scripting/rjson/dynamic-credentials.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>    
            </div>
            
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <a rel="me" href="https://dotnet.social/@royalapps">&nbsp;</a>
            
            <span>Copyright © <strong>Royal Apps</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/ra.vendor.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>

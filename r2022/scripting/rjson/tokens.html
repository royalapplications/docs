<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Tokens </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Tokens ">
    <meta name="generator" content="docfx 2.59.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper" class="ra-scripting">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="https://www.royalapps.com/?return_to_last_selected_page">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="scripting_rjson_tokens">
<h1 id="tokens">Tokens</h1>

<p>You may already be familiar with tokens in Royal TS/X from other object types, like Command- and Key Sequence Tasks. In the context of dynamic folder scripts, tokens allow you to inject values of the dynamic folder into your scripts. You can, for instance use the <code>$EffectiveUsername$</code> and <code>$EffectivePassword$</code> tokens to inject credentials into your scripts. This is useful to ensure no confidential data is stored in plain-text inside your script's content. It also allows you to store parameters of your scripts in a central location instead of somewhere in the scripts.</p>
<p>Here's a simple Python example:</p>
<pre><code class="lang-python">import json

jsonStr = json.dumps(
	{
		&quot;Objects&quot;: [
			{
				&quot;Type&quot;: &quot;Credential&quot;,
				&quot;Name&quot;: &quot;$Name$&quot;
			}
		]
	}
)

print(jsonStr)
</code></pre>
<p>In line 8 we're injecting the <code>$Name$</code> token into the credential's <code>Name</code> property value.</p>
<p>Here's what this gets you in Royal TSX:</p>
<p><img src="../../images/Scripting/rJSON/Screenshot_2-1.png" alt=""></p>
<p>The name of the credential created from rJSON is the same as the dynamic folder's name. Obviously, this isn't quite a real world example but it should get the point over.
Basically it's up to you how/if you want to use tokens in your scripts. If you're for instance calling a web service that requires authentication in your script, it makes sense to not store the credentials directly in your script. Instead, you should save them in the dynamic folder's credential settings. You may even store the URL of your web service endpoint in a custom property instead of directly in the script and refer to it using the <code>$CustomProperty.AlphanumericTitleWithoutSpaces$</code> token.</p>
<h2 id="special-tokens-for-dynamic-credential-scripts">Special Tokens for Dynamic Credential scripts</h2>
<h3 id="dynamiccredentialeffectiveid">DynamicCredential.EffectiveID</h3>
<p>The <code>$DynamicCredential.EffectiveID$</code> token can be used to retrieve the ID of the dynamic credential that is to be resolved. Because you can declare multiple dynamic credentials in your dynamic folder script, you have to somehow &quot;know&quot; which one should be returned by your dynamic credential script when it's executed.</p>
<p>Here's a simple Python example:</p>
<p><strong>Dynamic Folder Script</strong>:</p>
<pre><code class="lang-python">import json

print(json.dumps({
	&quot;Objects&quot;: [{
		&quot;Type&quot;: &quot;DynamicCredential&quot;,
		&quot;Name&quot;: &quot;Dynamic Credential 1&quot;,
		&quot;ID&quot;: &quot;01&quot;
	}, {
		&quot;Type&quot;: &quot;DynamicCredential&quot;,
		&quot;Name&quot;: &quot;Dynamic Credential 2&quot;,
		&quot;ID&quot;: &quot;02&quot;
	}]
}))
</code></pre>
<p><strong>Dynamic Credential Script</strong>:</p>
<pre><code class="lang-python">import json

credential_id = r&quot;$DynamicCredential.EffectiveID$&quot;

if credential_id == &quot;01&quot;:
	username = &quot;user1&quot;
	password = &quot;pass1&quot;
elif credential_id == &quot;02&quot;:
	username = &quot;user2&quot;
	password = &quot;pass2&quot;

print(json.dumps({
	&quot;Username&quot;: username,
	&quot;Password&quot;: password
}))
</code></pre>
<p>The dynamic folder script creates two dynamic credentials. These two credentials are assigned the IDs <code>&quot;01&quot;</code> and <code>&quot;02&quot;</code> respectively.</p>
<p>In the dynamic credential script, we use the <code>$DynamicCredential.EffectiveID$</code> token to refer to the Dynamic Credential's ID. Then, depending on whether the ID is <code>&quot;01&quot;</code> or <code>&quot;02&quot;</code>, we return different values for username and password.</p>
<h3 id="target-token-prefix">Target Token Prefix</h3>
<p>The <code>Target.</code> token prefix in Dynamic Credential scripts can be used to refer to properties of the connection that resolves the dynamic credential. This is useful if you're, for instance, using a PAM system and need to know which connection requested a particular credential. For example, to access the name of the connection that invoked the dynamic credential script, you can use <code>$Target.Name$</code>.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Support for the <code>Target.</code> token prefix was added in the following product versions:</p>
<ul>
<li>Royal TS (for Windows) 6.0</li>
<li>Royal TSX (for macOS) 5.0</li>
<li>Royal Server 4.0</li>
</ul>
</div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="form p-e2">
                <div class="form-group">
                  <label for="version-select">Version</label>
                  <select id="version-select" class="form-control">
                    <option value="r2022">[BETA] Royal TS V7 / Royal Server V5
                    <option value="r2021">Royal TS V6 / Royal Server V4
                  </select>
                </div>
              </div>    
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/royalapplications/docs/blob/main/src/r2022/scripting/rjson/tokens.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>    
            </div>
            
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <a rel="me" href="https://dotnet.social/@royalapps">&nbsp;</a>
            
            <span>Copyright © <strong>Royal Apps</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/ra.vendor.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>

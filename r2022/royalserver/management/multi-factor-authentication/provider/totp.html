<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Time-based One-time Password (TOTP) </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Time-based One-time Password (TOTP) ">
    <meta name="generator" content="docfx 2.59.2.0">
    
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper" class="ra-royalserver">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="time-based-one-time-password-totp">Time-based One-time Password (TOTP)</h1>

<p>TOTP is a generic algorithm that is implemented by a many services and Apps. Since it is a generic algorithm, any App that supports it can be used as a second factor for this provider. There are, for example, Apps from Microsoft, Google and many others.</p>
<h1 id="configuration-of-the-totp-provider">Configuration of the TOTP Provider</h1>
<p>The following steps outline the configuration of a user for TOTP.</p>
<h2 id="configuring-the-totp-provider">Configuring the TOTP provider</h2>
<p>Ensure that the <em>&quot;Generic TOTP Authenticator (Google, Microsoft, etc)&quot;</em> provider is enabled in the Providers tab.</p>
<div class="NOTE">
<h5>Note</h5>
<p>A change requires a restart of Royal Server.</p>
</div>
<h2 id="configuring-a-user">Configuring a user</h2>
<p>In the Users tab</p>
<ul>
<li>Click on <strong>Add...</strong>.</li>
<li>Click on <strong>Select User...</strong> to select a user and <code>Generic TOTP</code> as provider.</li>
<li>Select for which feature this user is reqiured to present a second factor (e.g. Document Store or Secure Gateway)</li>
<li>Specify an optional comment</li>
<li>Specify the caching time. Each successful authentication is then cached for the specified minutes. If a second MFA request</li>
<li>Provide meaningful names for Issuer and Label (these are displayed in the Authenticator Apps later).</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>A Caching Time of 0 minutes means no caching and the user has to provide a second factor for every operation.</p>
</div>
<p>When done, you are presented with a Secret text that you can copy and provide to the user and a QR Code that can be scanned by the TOTP Authenticator App directly.</p>
<div class="NOTE">
<h5>Note</h5>
<p>You can always show the generated secret again by clicking on <strong>Show Secret...</strong> for TOTP configured users.</p>
</div>
<div class="WARNING">
<h5>Warning</h5>
<p><strong>TOTP time sensitivity</strong><br>
The machine where Royal Server is installed and the device where the TOTP Authenticator App is running need to have correct time settings in order to make TOTP work. Use Time Services to ensure this.</p>
</div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/royalapplications/docs/blob/main/src/r2022/royalserver/management/multi-factor-authentication/provider/totp.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © <strong>Royal Apps</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/ra.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>

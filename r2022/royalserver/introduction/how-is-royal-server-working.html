<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>How is Royal Server Working? </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="How is Royal Server Working? ">
    <meta name="generator" content="docfx 2.58.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper" class="ra-royalserver">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="how-is-royal-server-working">How is Royal Server Working?</h1>

<p>Royal Server consists of three components: the Management Endpoint, the Secure Gateway and the Document Store.
For the Management Endpoint and the Document Store component: Royal Server is based on HTTP/S and is using Windows security features like local users and groups to ensure proper authentication.</p>
<p>The Secure Gateway component is based on SSH standards.</p>
<p><img src="/r2021/images/RoyalServer/screenshot_howroyalserverworks.png" alt=""></p>
<p>The basic flow of Management Endpoint connections works like this: Client devices like desktop computers running Royal TS/X or mobile devices running Royal TS for Android or iOS are accessing Royal Server over HTTP/S (possibly using a VPN tunnel). Royal Server itself is using different technologies to talk to the managed servers, depending on the used <a href="what-are-royal-server-components.html">component</a> and module. The Secure Gateway component is using a standards-based SSH connection.</p>
<h3 id="royal-server-is-agentless">Royal Server is agentless</h3>
<p>There is no need for the installation of an agent on the managed server. Nevertheless, the machine where Royal Server is running needs to be able to access the managed server over the network. Please check <a href="configuration.html#configuration-of-managed-servers">Configuration of Managed Servers</a> for details.</p>
<p>Royal Server features three major components:</p>
<ul>
<li>Management Endpoint (a way to manage servers remotely)</li>
<li>Document Store (host Royal Documents and share with the team)</li>
<li>Secure Gateway (enable a secure SSH-based communication to your servers)</li>
</ul>
<h2 id="under-the-hood---management-endpoint">Under the hood - Management Endpoint</h2>
<p>Royal Server needs to query managed servers in order to get the required information (e.g. getting the list of Windows Services).</p>
<p>For this, there are two basic ways this can be done:</p>
<ul>
<li>using WMI</li>
<li>using CIM</li>
</ul>
<table>
<thead>
<tr>
<th>Module</th>
<th>Protocol</th>
<th>Remark</th>
</tr>
</thead>
<tbody>
<tr>
<td>Eventlog</td>
<td>WMI/CIM</td>
<td>user needs to have the rights to read the Windows eventlog</td>
</tr>
<tr>
<td>Hyper-V</td>
<td>WMI/CIM</td>
<td></td>
</tr>
<tr>
<td>Processes</td>
<td>WMI/CIM</td>
<td></td>
</tr>
<tr>
<td>RoyalDocumentStore</td>
<td>-</td>
<td>internal module used by Royal Server</td>
</tr>
<tr>
<td>RoyalServerManagement</td>
<td>-</td>
<td>internal module used by Royal Server</td>
</tr>
<tr>
<td>Script</td>
<td>WMI/CIM</td>
<td>PowerShell remoting for PS</td>
</tr>
<tr>
<td>Terminal Services</td>
<td>WTS API</td>
<td>Proprietary protocol by Microsoft</td>
</tr>
<tr>
<td>VM Ware</td>
<td>WMI/CIM</td>
<td></td>
</tr>
<tr>
<td>Windows Services</td>
<td>WMI/CIM</td>
<td></td>
</tr>
</tbody>
</table>

<div class="NOTE">
<h5>Note</h5>
<p>Using WMI
From <a href="http://en.wikipedia.org/wiki/Windows_Management_Instrumentation">Wikipedia</a>, the free encyclopedia:</p>
<p>WMI (Windows Management Instrumentation) is a set of driver extensions to the Windows Driver Model that provides an operating system
interface through which instrumented components provide information and notification.</p>
<p>WMI is Microsoft's implementation of Web-Based Enterprise Management (WBEM) and Common Information Model (CIM). It relies on a binary
communication protocol that is using dynamic ports (TCP/135 for &gt; standard RPC and a randomly assigned port between 1024-65535
(for Windows 2003 and older) or 49152-65535 (for Windows 2008 and newer).</p>
<p>For details to prepare servers to be managed by Royal Server please check our <a href="./pepare-managed-server.md">Pepare a Managed Server</a> script.</p>
</div>
<h2 id="under-the-hood---document-store">Under the hood - Document Store</h2>
<p>The Document Store component is based on HTTPs/SSL communication between Royal TS/X and Royal Server. Check the
<a href="../management/service-configuration.html">Service Configuration</a> and <a href="../management/security-configuration.html">Security Configuration</a> for
more details.</p>
<h2 id="under-the-hood---secure-gateway">Under the hood - Secure Gateway</h2>
<p>Secure Gateway connections are based on SSH. Check <a href="../components/secure-gateway/gateway-configuration.html">Gateway Configuration</a> and
<a href="../components/secure-gateway/gateway-security-configuration.html">Gateway Security Configuration</a> for more details.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/royalapplications/docs/blob/main/src/r2022/royalserver/introduction/how-is-royal-server-working.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © <strong>Royal Apps</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/ra.vendor.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
